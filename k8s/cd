pipeline {
  agent   agent {
    kubernetes {
      yaml '''
        apiVersion: v1
        kind: Pod
        spec:
          containers:
           - name: kubectl
            image: bitnami/kubectl:latest
            command:
            - sleep
            args:
            - 99d
            tty: true
        '''
    }
  }
    stages {
	  stage('Deploy Production') {
            steps{
            	sh 'ls k8s/app/'
                step([$class: 'KubernetesEngineBuilder', 
                        projectId: "mostafa-ashour-project",
                        clusterName: "primary",
                        zone: "us-central1-a",
                        manifestPattern: 'k8s/app/python-deploy.yaml',
                        credentialsId: "mostafa-ashour-project",
                        verifyDeployments: true])
            }
        } 
	}
}





















